pico-8 cartridge // http://www.pico-8.com
version 33
__lua__
_set_fps(60)
pal({[0]=0,0,-16,-16,-15,-15,-15,-15,-14,-14,-14,-11,-11,2,-8,-8},1)

function burn(c)
 local new_c = max(c-1,0)
 return new_c
end

function rnd_sign()
 if rnd(1) >= 0.5 then
  return(-1)
 else
  return(1)
 end
end

fc=128
srand(42)
cls()
gif_counter = 0
rec_started = false
rec_ended = false
::_::

fc-=rnd(0.5)

for i=0,1000 do
 p=0x6000+rnd(8181)
 q=0x6000+rnd(8181)
 poke(p,peek(p)/128-fc)
 poke(q,p/64-fc)
end

if fc<=0 then
 fc=128
 srand(42)
 gif_counter+=1
end

for i=1,500 do 
 local x = rnd(128)
 local y = rnd(128)
 c=pget(x,y)
 if c > 0 then
  pset(x,y,burn(c))
 end
end

-- black bars
rectfill(0,0,40,128,0)
rectfill(80,0,128,128)
rectfill(0,0,128,40)
rectfill(0,80,128,128)


if rnd() > 0.8 then
 sspr(0,0,31,31,45+(rnd(1)*rnd_sign()),45+(rnd(1)*rnd_sign()))
end 

flip()

if gif_counter == 2 and not rec_started then
 extcmd("rec") -- start recording
 rec_started = true
end
if gif_counter == 3 and not rec_ended and rec_started then
 extcmd("video") -- save video
 rec_ended = true
end


goto _
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000ffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000fff0000f0fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000fffff00000f00000ffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000fff0000ff0ffff000000f0ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000f000f0000ff0000ff0ffff000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00f00000fff0f000000f0f0000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0f000000ff0f000ff000ff00000ff0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f0000fff000f00ffff00f0000ff0000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f00fff00000f00ffff00fffff000000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ff00000000f000ff000f000ffff00f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00f000000ff0f000000ff0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000f0ffff000ff0000ff0f000000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000ff0000000ffffff000ff00ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000ffff0ff00000f000ffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000fff00000ffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000ffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
