pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
-- init
lib={} -- library of all pages: title,page
curr_page=nil -- current page
prev_page=nil -- previous page
bkmk=nil -- bookmark a page
debug={}  -- list of things to print for debug
pal(15,7,1)

function _init()
 
 cls()
 -- landing page
 lp=new_page(
 "landing/debug", 
 "you find yourself looking at the\n"..
 "strange digital cosmology of \n"..
 "the trace, once again.\n\n"..
 "now there is even more text.",
 v9_static
 )
	lp.choices[⬆️]=new_choice(
	"begin",
	lib["landing/debug"]
	)
	
--	lp.choices[⬇️]=new_choice(
--	"debug",
--	lib["landing/debug"]
--	)
--
--	lp.choices[⬅️]=new_choice(
--	"yeah testing",
--	lib["landing/debug"]
--	)
	
	lp.choices[➡️]=new_choice(
	"wrting stuff",
	lib["landing/debug"]
	)

	-- set current page to landing page
	curr_page=lp
	
	
end
-->8
-- update
function _update60()
-- srand(curr_page.seed)
 srand(rnd(-1))
 if(not curr_page.i)curr_page.logo:init()curr_page.i=true
 
 -- do callbacks for curr_page
 if(curr_page.cb)curr_page:cb()
 
 -- check inputs for choices
 for b in all({⬆️,⬇️,⬅️,➡️}) do
	 if btnp(b) then
	  if curr_page.choices[b] then
	  	prev_page=curr_page
	  	curr_page=curr_page.choices[b].page
	  end
	 end
 end
 
 -- set bookmark
 if(btnp(❎))bkmk=curr_page
 if(bkmk and btnp(🅾️))curr_page=bkmk
   
end
-->8
-- classes

function new_page(title,text,logo,cb)
	local page = {}
	page.title = title
	page.seed = get_seed(page.title)
	page.text = text
	page.logo = logo
	page.cb = cb
	page.choices = {}
	
	-- method assignments
	page.dis_title = dis_title
	page.dis_text = dis_text
	page.dis_logo = dis_logo
	page.dis_choices = dis_choices
	
	-- finish
	lib[title]=page
	return page
end

function new_choice(title,page,cb)
 local choice = {}
 choice.title=title
 choice.page=page
 choice.cb=cb
 return(choice)
end
-->8
-- utils
function get_seed(w)
 s=1
 for i=1,#w do
	ch=ord(sub(w,i,i))s+=s*31+ch
	end
--	if(#w==0)s=r(-1) 
	return(s)
end

function hcenter(s,c)
  -- screen center minus the
  -- string length times the 
  -- pixels in a char's width,
  -- cut in half
  return c-#s*2
end

butt_key={[0]="⬅️","➡️","⬆️","⬇️"}
-->8
-- draw
function _draw()
 curr_page:dis_title()
 curr_page:dis_text()
 curr_page:dis_logo()
 curr_page:dis_choices()
 
 if(bkmk)spr(2,120,0)
 if(curr_page==bkmk)spr(1,120,0)
 
 -- debug
 for i=1,#debug do
  print("\^#"..tostr(debug[i]),0,0+8*i,15)
 end
end

function dis_title(page)
	print(page.title,0,0,15)
end

function dis_logo(page)
 clip(0,8,128,32)
 page.logo:draw()
 clip()
end

function dis_text(page)
 print(page.text,0,48,15)
end

function dis_choices(page)
 local c⬆️=page.choices[⬆️]
 local c⬇️=page.choices[⬇️]
 local c⬅️=page.choices[⬅️]
 local c➡️=page.choices[➡️]
	
	if c⬆️ then
	 print(butt_key[⬆️],60,106,15)
	 print(c⬆️.title,hcenter(c⬆️.title,64),98,15)
	end
	if c⬇️ then
	 print(butt_key[⬇️],60,114,15)
	 print(c⬇️.title,hcenter(c⬇️.title,64),122,15)
	end
	if c⬅️ then
	 print(butt_key[⬅️],56,110,15)
	 print(c⬅️.title,hcenter(c⬅️.title,26),110,15)
	end
	if c➡️ then
	 print(butt_key[➡️],64,110,15)
	 print(c➡️.title,hcenter(c➡️.title,102),110,15)
	end
end
-->8
-- pages


-->8
-- logos
v9_static = {}
function v9_static.init(self)
 fillp(rnd({▥,█,▤}))
 self.p={1,3}
 self.g=rnd(5)-3
 self.a=-1
 self.b=self.a*2
 self.z=2
 self.w=self.z+rnd(self.p)
 self.c=rnd(14)\1+2
 for i=1,14do pal(i,flr(rnd(33)-17),1)end
end

function v9_static.draw(self)
	for x=self.g,128,self.z do for y=self.g,128,self.w do
 circ(x,y,rnd(2),x*y%self.c)end end
end
__gfx__
00000000007777700077777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007777700070007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007777700070007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000007777700070007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000007777700070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007707700077077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007000700070007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
70007770770077007770770007700070770077707770707007700000000000000000000000000000000000000000000000000000000000000000000000000000
70007070707070700700707070000700707070007070707070000000000000000000000000000000000000000000000000000000000000000000000000000000
70007770707070700700707070000700707077007700707070000000000000000000000000000000000000000000000000000000000000000000000000000000
70007070707070700700707070700700707070007070707070700000000000000000000000000000000000000000000000000000000000000000000000000000
77707070707077707770707077707000777077707770077077700000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000a000000050e000000000000000000000000000000000000008000000000000000000000000000000000000000000030000d0f000000000000000
00000000b0000000000000000000000000c00008000b000000000000000000000000000200000000000000000000008000000000000000000000000000009000
0000e000000000000000004000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000c00000d000000000000000000000000000000000000000000000000000000e00000000000
00000000000000000000000000000000000010000000000700000000b000300000001500000000002000000000000006000000000000000000ff000000000000
00000000000000000000000000000000000000000000000000000000000400000000000000000000000000000005000000000000000000000000000000000000
00000000000000000700000a00000000000000000000080000006000000000000000000000000000000000000000000000000008000000000000000000000000
70000010000000000000a000000000000000000000000000000000000900000010000000000000000f000000000000000080000000c010000000000000000000
00000000000000000000000000000000000c090000000000000000000000000000000000000000000000000000000b00000000000020f0000000000000000000
0000900000000000000000000300000000c0000000000000000400b00000000000300f0000000000000000900000000000000000000000004000000000000000
0000000b200000000000000000000060000000000000c00080000000000000000000000000000000000004000000000000000000000000200000000000000000
000000000000000000006000000000000000000000000000000000000000000000000002000000000000000000000000000040a00000000500000d0000000000
000000000000100000000000000000000e00000000000000000000000000000200000000000000000c0040000000000000000000000000000000000000000000
0700000000000000000000000000000000000000000000000000000000000000b00000f000000000000000000f000000a0000000000000000040000000000070
00000b0000000000000000000d0000000000000000000010000000000000040000000000000000000000d0000000000000000700000000000000000000000010
000000000000000000000000000000000d0000000000000005e00c000e0000000000000040000000000000000000000000000000080000300000000000000000
70000000010000000000000000a00000020000000000000000000000000000000000000000000000000000000000000000000000000000000006000090000dd0
000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000c000000000010000000060c000000
00000400000000000000000a0000000000000000000000000000008000000000000000000060000c00000000000008a000005000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000
09000a0c0004009000000000000000500000000000900f0000000000b00000000000000000000000000e0000000000000000000000000e000000000000000900
0000000000000000000000000000000000000000000000903000000000000000000000000e000000000000000000008020000000004000000000000000000900
00000000b00800000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000200000000000000000000000
00000000000000000000500000000004000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000
00000000000000900000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000407000000000070000
000000000000000000000000000000000f0000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000
0000d00000000000000000000000000000000000000000000000000000ae00000000000000000000000000000000000000000000000000000600000004000b00
0000000000000000000000000000000000000000000000d000000000000000000000007000000000000000000000000000000000000000003000200000000000
0000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000d00000002000000000050000003000000a
0000000000b000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000009000000000000000e00000
007000000c0000000000000000000000000000000000000000000001000000000000f0000000000f000000100000000000000000000000000000001000000000
0000000000000000000000000000000000000000000000090c0000000000000000000000000010000000000000f0000000000000000000000000000000009060
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70700770707000007770777077007700000070700770707077700770777070007770000070000770077070707770770007700000777077700000777070707770
70707070707000007000070070707070000070707070707070707000700070007000000070007070707070700700707070000000707007000000070070707000
77707070707000007700070070707070000077707070707077007770770070007700000070007070707077000700707070000000777007000000070077707700
00707070707000007000070070707070000000707070707070700070700070007000000070007070707070700700707070700000707007000000070070707000
77707700077000007000777070707770000077707700077070707700777077707000000077707700770070707770707077700000707007000000070070707770
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07707770777077707700077077700000770077700770777077707770700000000770077007707770077070000770077070700000077077700000000000000000
70000700707070707070700070000000707007007000070007007070700000007000707070007770707070007070700070700000707070000000000000000000
77700700770077707070700077000000707007007000070007007770700000007000707077707070707070007070700077700000707077000000000000000000
00700700707070707070707070000000707007007070070007007070700000007000707000707070707070007070707000700000707070000000000000000000
77000700707070707070777077700000777077707770777007007070777000000770770077007070770077707700777077700000770070000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77707070777000007770777077700770777000000000077077000770777000007770077077707770770000000000000000000000000000000000000000000000
07007070700000000700707070707000700000000000707070707000700000007070700070700700707000000000000000000000000000000000000000000000
07007770770000000700770077707000770000000000707070707000770000007770700077700700707000000000000000000000000000000000000000000000
07007070700000000700707070707000700007000000707070707000700000007070707070700700707000000000000000000000000000000000000000000000
07007070777000000700707070700770777070000000770070700770777000007070777070707770707007000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000077707770077077707700000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000070707000700007007070000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000077007700700007007070000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000070707000707007007070000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000077707770777077707070000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000007777700000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000077707770000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000077000770000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000077000770000000000000000000000000000000000000000000000000000000000000
00707077707770707000007770777007707770777077000770000000077777777777770000000070707770777077707700077000000770777070707770777000
00707070007070707000000700700070000700070070707000000000777007707700777000000070707070070007007070700000007000070070707000700000
00777077007770777000000700770077700700070070707000000000770007707700077000000070707700070007007070700000007770070070707700770000
00007070007070707000000700700000700700070070707070000000777007707700777000000077707070070007007070707000000070070070707000700000
00777077707070707000000700777077000700777070707770000000077777777777770000000077707070070077707070777000007700070007707000700000
00000000000000000000000000000000000000000000000000000000000077000770000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000077000770000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000077707770000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000007777700000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000077007770777070700770000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000070707000707070707000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000070707700770070707000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000070707000707070707070000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000077707770777007707770000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

